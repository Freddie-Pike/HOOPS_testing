(this["webpackJsonphwp-demo-react-microengine"]=this["webpackJsonphwp-demo-react-microengine"]||[]).push([[0],{1:function(e,t){e.exports=Communicator},14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var i=a(2),s=a.n(i),n=a(9),r=a.n(n),c=a(3),o=a(4),l=a(5),h=a(7),d=a(6),u=(a(14),a.p+"static/media/microengine.13206977.scs"),p=a.p+"static/media/ts3d_logo.e5dcf0a8.png",v=a(19),m=a(1),j=a.n(m),b=a(0),O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).viewerId=Object(v.a)(),i}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=new j.a.WebViewer({containerId:this.viewerId,endpointUri:this.props.modelUri});e.setCallbacks({sceneReady:function(){e.view.setBackgroundColor(j.a.Color.white(),j.a.Color.white())}}),e.start(),window.addEventListener("resize",(function(){e.resizeCanvas()})),this.props.hwvReady(e)}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"bg-light w-100 h-100 position-relative",id:this.viewerId})}}]),a}(i.Component),w=function(){function e(t){Object(c.a)(this,e),this._hwv=t,this._activeIndication=null}return Object(o.a)(e,[{key:"onMouseDown",value:function(e){var t=this,a=new j.a.PickConfig(j.a.SelectionMask.Face|j.a.SelectionMask.Line);this._hwv.selectionManager.clear(),this._hwv.view.pickFromPoint(e.getPosition(),a).then((function(e){if(null!==e.getNodeId()){var a=e.getPosition(),i=t._hwv.markupManager;null===t._activeIndication?(t._activeIndication=new g(t._hwv,a,t._hwv.model.getNodeUnitMultiplier(e.getNodeId())),i.registerMarkup(t._activeIndication)):(t._activeIndication.point2=a,t._activeIndication.finalize(),t._activeIndication=null)}}))}},{key:"onMouseMove",value:function(e){var t=this;if(null!==this._activeIndication){var a=new j.a.PickConfig(j.a.SelectionMask.Face|j.a.SelectionMask.Line);this._hwv.selectionManager.clear(),this._hwv.view.pickFromPoint(e.getPosition(),a).then((function(e){if(null!==e.getNodeId()){var a=e.getPosition();t._activeIndication.point2=a,t._hwv.markupManager.refreshMarkup()}}))}}}]),e}(),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e,i,s){var n;return Object(c.a)(this,a),(n=t.call(this))._hwv=e,n.point1=i,n.point2=null,n._unit=s,n._isFinalized=!1,n}return Object(o.a)(a,[{key:"draw",value:function(){var e=this._hwv.view;if(null!==this.point1){var t=new j.a.Markup.Shape.Circle,a=e.projectPoint(this.point1);if(t.set(j.a.Point2.fromPoint3(a),2),this._hwv.markupManager.getRenderer().drawCircle(t),null!==this.point2){a=e.projectPoint(this.point2),t.set(j.a.Point2.fromPoint3(a),2),this._hwv.markupManager.getRenderer().drawCircle(t);var i=new j.a.Markup.Shape.Line,s=e.projectPoint(this.point1),n=e.projectPoint(this.point2);i.setP1(j.a.Point2.fromPoint3(s)),i.setP2(j.a.Point2.fromPoint3(n)),this._isFinalized||i.setStrokeWidth(5),this._hwv.markupManager.getRenderer().drawLine(i);var r=new j.a.Point3((s.x+n.x)/2,(s.y+n.y)/2,(s.z+n.z)/2),c=j.a.Point3.subtract(this.point2,this.point1).length()*this._unit,o=new j.a.Markup.Shape.Text(c.toFixed(2)+"mm",j.a.Point2.fromPoint3(r));o.setFillColor(j.a.Color.red()),this._hwv.markupManager.getRenderer().drawText(o)}}}},{key:"finalize",value:function(){this._isFinalized=!0,this._hwv.markupManager.refreshMarkup()}}]),a}(j.a.Markup.MarkupItem),f=w,x=function(){function e(t){Object(c.a)(this,e),this._hwv=t}return Object(o.a)(e,[{key:"onMouseDown",value:function(e){var t=this,a=new j.a.PickConfig(j.a.SelectionMask.Face|j.a.SelectionMask.Line);this._hwv.selectionManager.clear(),this._hwv.view.pickFromPoint(e.getPosition(),a).then((function(e){null!=e.getNodeId()&&t._hwv.selectionManager.set(e)}))}}]),e}(),k=(a(16),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).updateItemList=i.updateItemList.bind(Object(l.a)(i)),i.rootNodeId=i.props.hwv.model.getAbsoluteRootNode(),i.itemList={},i}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;for(var t in this.itemList)this.itemList[t].setSelect(!1);this.props.hwv.setCallbacks({selectionArray:function(t){for(var a in e.itemList)e.itemList[a].setSelect(!1);t.forEach((function(t){var a=t.getSelection().getNodeId();e.itemList[a].setSelect(!0)}))}})}},{key:"updateItemList",value:function(e,t){this.itemList[e]=t}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"list-group",children:[Object(b.jsx)("div",{className:"d-none"}),Object(b.jsx)(S,{hwv:this.props.hwv,nodeId:this.rootNodeId,level:0,updateItemList:this.updateItemList})]})}}]),a}(i.Component)),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;switch(Object(c.a)(this,a),(i=t.call(this,e)).setSelect=i.setSelect.bind(Object(l.a)(i)),i.selectClick=i.selectClick.bind(Object(l.a)(i)),i.collapseClick=i.collapseClick.bind(Object(l.a)(i)),i.childrenId=[],i.nodeName="",i.state={isSelected:!1,isCollapsed:!1},i.props.hwv.model.getNodeType(i.props.nodeId)){case j.a.NodeType.Part:case j.a.NodeType.PartInstance:case j.a.NodeType.BodyInstance:case j.a.NodeType.AssemblyNode:i.nodeName=i.props.hwv.model.getNodeName(i.props.nodeId),i.childrenId=i.props.hwv.model.getNodeChildren(i.props.nodeId),i.props.updateItemList(i.props.nodeId,Object(l.a)(i))}return i}return Object(o.a)(a,[{key:"setSelect",value:function(e){this.setState({isSelected:e})}},{key:"selectClick",value:function(e){this.props.hwv.selectPart(this.state.isSelected?null:this.props.nodeId)}},{key:"collapseClick",value:function(e){this.setState({isCollapsed:!this.state.isCollapsed})}},{key:"render",value:function(){var e=this,t={paddingLeft:20*this.props.level+10,marginBottom:-1},i=this.childrenId.map((function(t){return Object(b.jsx)(a,{hwv:e.props.hwv,nodeId:t,level:e.props.level+1,updateItemList:e.props.updateItemList},t)})),n=(this.childrenId.length>0?"caret ":"")+(this.state.isCollapsed?"":"caret-down"),r=this.state.isSelected?"bg-primary text-white ":"";return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsxs)("div",{className:"list-group-item list-group-item-action d-flex py-1 "+r,style:t,children:[Object(b.jsx)("div",{className:"py-1 "+n,onClick:this.collapseClick}),Object(b.jsx)("div",{className:"py-1 flex-fill cursor-pointer user-select-none",onClick:this.selectClick,children:this.nodeName})]}),Object(b.jsx)("div",{className:this.state.isCollapsed?"d-none":"",children:i})]})}}]),a}(i.Component),y=k,I=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).hwvReady=i.hwvReady.bind(Object(l.a)(i)),i.changeTab=i.changeTab.bind(Object(l.a)(i)),i.changeOperator=i.changeOperator.bind(Object(l.a)(i)),i.selectOperatorId=null,i.measureOperatorId=null,i.state={hwv:null,currentTab:1,cameraStatus:null,operator:"Orbit",isStructureReady:!1},i}return Object(o.a)(a,[{key:"hwvReady",value:function(e){var t=this,a=new x(e);this.selectOperatorId=e.registerCustomOperator(a);var i=new f(e);this.measureOperatorId=e.registerCustomOperator(i),this.setState({hwv:e},(function(){t.state.hwv.setCallbacks({sceneReady:function(){t.setState({cameraStatus:t.state.hwv.view.getCamera().toJson()})},modelStructureReady:function(){t.setState({isStructureReady:!0})},camera:function(){t.setState({cameraStatus:t.state.hwv.view.getCamera().toJson()})}})}))}},{key:"changeOperator",value:function(e){var t=this;this.setState({operator:e.target.value},(function(){t.state.hwv&&(t.state.hwv.operatorManager.clear(),t.state.hwv.operatorManager.push(j.a.OperatorId.Orbit),"Area Select"===t.state.operator?t.state.hwv.operatorManager.push(j.a.OperatorId.AreaSelect):"Select"===t.state.operator?t.state.hwv.operatorManager.push(t.selectOperatorId):"Measure"===t.state.operator&&t.state.hwv.operatorManager.push(t.measureOperatorId))}))}},{key:"changeTab",value:function(e){this.setState({currentTab:e})}},{key:"render",value:function(){var e=this,t=function(t,a){return Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("button",{className:"nav-link "+(e.state.currentTab===t?"active":""),onClick:function(){e.changeTab(t)},type:"button",children:a})})},a=null==this.state.cameraStatus?Object(b.jsx)("p",{children:"Unavailable"}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Position:"}),this.state.cameraStatus.position.x.toFixed(2),", ",this.state.cameraStatus.position.y.toFixed(2),", ",this.state.cameraStatus.position.z.toFixed(2)]}),Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Target:"}),this.state.cameraStatus.target.x.toFixed(2),", ",this.state.cameraStatus.target.y.toFixed(2),", ",this.state.cameraStatus.target.z.toFixed(2)]}),Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Up:"}),this.state.cameraStatus.up.x.toFixed(2),", ",this.state.cameraStatus.up.y.toFixed(2),", ",this.state.cameraStatus.up.z.toFixed(2)]}),Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Width:"})," ",this.state.cameraStatus.width.toFixed(2)," \xa0",Object(b.jsx)("strong",{children:"Height:"})," ",this.state.cameraStatus.height.toFixed(2)]}),Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Projection:"})," ",this.state.cameraStatus.projection.toFixed(2)," \xa0",Object(b.jsx)("strong",{children:"NearLimit:"})," ",this.state.cameraStatus.nearLimit.toFixed(2)]}),Object(b.jsxs)("p",{className:"mb-0",children:[Object(b.jsx)("strong",{children:"Class Name:"})," ",this.state.cameraStatus.className]})]}),i=Object(b.jsxs)("div",{className:"tab-pane fade show "+(1===this.state.currentTab?"active":""),children:[Object(b.jsx)("h2",{children:"React Demo for Hoops Web Platform"}),Object(b.jsx)("h5",{children:"Operator"}),Object(b.jsxs)("select",{className:"form-select mb-3",value:this.state.operator,onChange:this.changeOperator,children:[Object(b.jsx)("option",{value:"Orbit",children:"Orbit"}),Object(b.jsx)("option",{value:"Area Select",children:"Area Select"}),Object(b.jsx)("option",{value:"Select",children:"Select"}),Object(b.jsx)("option",{value:"Measure",children:"Measure"})]}),Object(b.jsx)("h5",{children:"Camera Status"}),a]}),s=Object(b.jsxs)("div",{className:"tab-pane fade show "+(2===this.state.currentTab?"active":""),children:[Object(b.jsx)("h5",{children:"Model Structure"}),this.state.isStructureReady?Object(b.jsx)(y,{hwv:this.state.hwv}):Object(b.jsx)("p",{children:"Model structure is not ready"})]});return Object(b.jsxs)("div",{className:"container-fluid p-0 m-0",children:[Object(b.jsxs)("div",{className:"row p-0 m-0",style:{height:"100vh"},children:[Object(b.jsx)("div",{className:"col-6 p-0 m-0 border-end",children:Object(b.jsx)(O,{modelUri:u,hwvReady:this.hwvReady})}),Object(b.jsxs)("div",{className:"col-6 p-0 m-0 overflow-scroll",style:{height:"100vh"},children:[Object(b.jsx)("img",{src:p,className:"img-fluid m-3",style:{maxHeight:"100px"},alt:"TechSoft 3D LOGO"}),Object(b.jsxs)("ul",{className:"nav nav-tabs px-3",children:[t(1,"Home"),t(2,"ModelStructure")]}),Object(b.jsxs)("div",{className:"tab-content p-3",children:[i,s]})," "]})," "]})," "]})}}]),a}(i.Component);r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.1d6c7f5e.chunk.js.map